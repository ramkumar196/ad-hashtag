<mat-accordion>
  <mat-expansion-panel *ngFor="let conv of conversationList"  >
    <mat-expansion-panel-header (click)='messages(conv.conversation_key)'>
      <mat-panel-title>
        {{conv.sender_name}}
      </mat-panel-title>
      <mat-panel-description>
        {{conv.hashtags}}
      </mat-panel-description>
    </mat-expansion-panel-header>
    <div>
    <mat-card class="m-3" style="width:50%" *ngFor="let msg of messageList" >
        <!-- <mat-card-header>
            <img [src]="msg.profile_image"  class="border " mat-card-avatar>
            <mat-card-title class="font-14"> {{msg.username | titlecase}}</mat-card-title>
            <mat-card-subtitle>{{msg.created_at}}</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content class="mt-2"> -->
                          {{msg.message}}
          <!-- </mat-card-content> -->
        </mat-card>

    <form [formGroup]="messageForm" class="mt-1" (ngSubmit)="sendMessage(conv.user_id,conv.ad_id)">
        <mat-form-field class="full-width mr-1">
        <input
        formControlName="message"
        matInput
         class="form-control" 
        placeholder="Type your message"
        value="">
      </mat-form-field>
      <button mat-fab [disabled]="!messageForm.valid" type="submit" color="accent"><mat-icon>send</mat-icon></button>
      </form>
    </div>
  </mat-expansion-panel>
</mat-accordion>
